Title: MySQL : MyISAM vs InnoDB, 그리고 DATETIME vs DATE
Time: 15:48:00

SELECT 위주의 간단한 성능 측정 결과를 정리했다.

  

일반적인 게시판 형태의 글을 5백만 건(일 평균 86,400개로 설정)담고 있는 테이블을 각각 MyISAM, InnoDB 엔진으로 만들었다.
데이터의 내용은 동일하고 크기는 다음과 같다.

엔진

개수

타입

평균길이

데이터 크기

MB 단위

인덱스 크기

MB 단위

**MyISAM**
5,000,000

Dynamic

718

3,590,726,684

3,424.4

194,397,184

185.4

**InnoDB**
5,000,000

Compact

795

4,053,794,816

3,866.0

267,337,728

255.0

  

  

각 엔진의 세부 튜닝 없이 기본 설치된 값으로 진행하였으며, 튜닝한다고 해도 크게 영향을 받지는 않는 정도의 규모라 생각한다.
DATETIME과 DATE의 비교를 위해, DATETIME 값을 별도 DATE/TIME으로 구분하여 별도 컬럼에 저장하였으며, 하루치
데이터를 가져오기 위해 사용한 구문은 아래와 같다.

  * DATETIME : WHERE [DATETIME컬럼] BETWEEN '특정일' AND '특정일+1'
  * DATE : WHERE [DATE컬럼] = '특정일'

(단위:초)

MyISAM

InnoDB


DATETIME

DATE

NO INDEX

DATETIME

DATE

NO INDEX

2달치 레코드 수

4.01

1.82

43.26

8.02

2.94

45.47

하루치 레코드 중 5만번째 레코드

0.37

0.28

24.50

0.82

0.71

29.49

하루치 레코드 수

0.10

0.04

42.75

0.11

0.06

45.33

1주일치 제목의 평균길이 측정

4.41

생략

45.38

생략

한달치 게시물의 조회수 합

38.17

45.48

위의 표에서 특이점을 찾아본다면,

  * 평균 길이 측정에서 InnoDB가 왜 느린지.
  * OLTP가 아닌 OLAP식의 처리는MyISAM이 일반적으로 유리하다.
  * DATETIME에서 특정 일을 BETWEEN 구문으로 처리하는 것 보다 DATE / TIME을 분리하여 저장한 후, DATE를 사용하는 것이 좀 더 빠르다. 각각 장단점이 있겠지만 일반적인 분석의 단위가 '하루'임을 생각해보면 DATE/TIME을 분리하는 것의 상대적인 장점을 찾아볼 수 있다.

( 밑의 2가지 쿼리는 DATETIME/DATE의 차이가 없어 하나만 측정하였다 )

